# نظام السعد للسفريات

## نظرة عامة
نظام متكامل لإدارة شركة السعد للسفريات، يشمل إدارة العملاء، الحجوزات، التأشيرات، المحاسبة، وغيرها من الوظائف الأساسية لشركات السياحة والسفر.

## إعداد المشروع

### متطلبات النظام
- Node.js (v16 أو أحدث)
- npm (v8 أو أحدث)
- حساب Firebase

### خطوات التثبيت

1. قم بتثبيت الاعتمادات:
```bash
npm install
```

2. قم بإعداد Firebase:
   - انتقل إلى [Firebase Console](https://console.firebase.google.com/)
   - قم بإنشاء مشروع جديد
   - قم بتمكين Authentication و Firestore

3. قم بإعداد Firebase Admin SDK:
   - في Firebase Console، انتقل إلى Project Settings > Service Accounts
   - انقر على "Generate New Private Key"
   - قم بتنزيل ملف JSON وإعادة تسميته إلى `serviceAccountKey.json`
   - ضع الملف في المجلد الرئيسي للمشروع

4. قم بإعداد ملف `.env`:
```ini
# Firebase Configuration
VITE_FIREBASE_API_KEY=your_api_key
VITE_FIREBASE_AUTH_DOMAIN=your_auth_domain
VITE_FIREBASE_PROJECT_ID=your_project_id
VITE_FIREBASE_STORAGE_BUCKET=your_storage_bucket
VITE_FIREBASE_MESSAGING_SENDER_ID=your_messaging_sender_id
VITE_FIREBASE_APP_ID=your_app_id

# Default Admin User
VITE_DEFAULT_ADMIN_EMAIL=admin@alsaadtravels.com
VITE_DEFAULT_ADMIN_PASSWORD=Admin@123456
```

### تشغيل المشروع

لتشغيل المشروع في وضع التطوير:
```bash
npm run dev
```

لبناء المشروع للإنتاج:
```bash
npm run build
```

لتشغيل الإصدار المبني:
```bash
npm run preview
```

## الميزات الرئيسية

### 1. إدارة العملاء
- تسجيل بيانات العملاء بشكل منظم (الاسم العربي والإنجليزي)
- حقول إلزامية للرقم المدني ورقم الجواز
- إمكانية تخصيص الحقول الإلزامية من صفحة الإعدادات
- إدارة المرافقين لكل عميل

### 2. الحجوزات والخدمات
- حجوزات الفنادق
- حجوزات الطيران
- حجوزات المركبات
- إدارة التأشيرات
- حجوزات الفعاليات

### 3. النظام المحاسبي
- إدارة الفواتير
- تسجيل الإيرادات والمصروفات
- التقارير المالية
- سجلات الإيصالات

### 4. إدارة المستخدمين والصلاحيات
- مستويات مختلفة من الصلاحيات (مدير، موظف، إلخ)
- إدارة الصلاحيات بشكل تفصيلي
- تسجيل خروج تلقائي بعد فترة من عدم النشاط

### 5. أدوات النظام
- تنظيف البيانات التجريبية
- إعدادات النظام المتقدمة
- إدارة الحقول الإلزامية

## التحسينات الجديدة

### 1. تحسينات الأداء
- تخزين مؤقت للبيانات لتقليل الطلبات إلى Firestore
- تحميل تدريجي للبيانات (pagination)
- تحسين حجم الصور قبل الرفع
- تأخير البحث لتقليل عدد الطلبات

### 2. تحسينات الأمان
- تسجيل خروج تلقائي بعد فترة من عدم النشاط
- التحقق من قوة كلمات المرور
- تشفير البيانات الحساسة
- التحقق من الصلاحيات قبل تنفيذ العمليات

### 3. تحسينات واجهة المستخدم
- واجهة مستخدم عربية سهلة الاستخدام
- ترتيب حقول إدخال بيانات العملاء بشكل منطقي
- تمييز الحقول الإلزامية بعلامة (*)
- رسائل خطأ واضحة ومفصلة

### 4. معالجة الأخطاء
- معالجة موحدة للأخطاء
- رسائل خطأ مخصصة لأخطاء Firebase
- تسجيل الأخطاء في وحدة التحكم

## ملاحظات مهمة

- تأكد من عدم رفع ملف `serviceAccountKey.json` إلى Git
- قم بحماية بيانات الاعتماد في ملف `.env`
- المشرف الافتراضي سيتم إنشاؤه تلقائياً عند بدء التشغيل لأول مرة
- استخدم وظيفة تنظيف البيانات التجريبية قبل البدء بالعمل الفعلي
- تأكد من تعيين الحقول الإلزامية المناسبة في صفحة الإعدادات

## المطورون

تم تطوير هذا النظام بواسطة فريق تطوير نظام السعد للسفريات.
